name: Verify Secrets

on:
  workflow_dispatch:

jobs:
  verify-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Check SUPABASE_URL secret
        if: secrets.SUPABASE_URL == ''
        run: |
          echo "ERROR: SUPABASE_URL secret is missing"
          exit 1
      
      - name: Check SUPABASE_SERVICE_KEY secret
        if: secrets.SUPABASE_SERVICE_KEY == ''
        run: |
          echo "ERROR: SUPABASE_SERVICE_KEY secret is missing"
          exit 1
      
      - name: Verify secrets are available
        run: |
          echo "Both SUPABASE_URL and SUPABASE_SERVICE_KEY secrets are available"
          echo "SUPABASE_URL length: ${#SUPABASE_URL}"
          echo "SUPABASE_SERVICE_KEY length: ${#SUPABASE_SERVICE_KEY}"
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_SERVICE_KEY: ${{ secrets.SUPABASE_SERVICE_KEY }}
